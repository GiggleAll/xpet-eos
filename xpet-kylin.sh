# 初始状态
cleos-kylin get table iasdfhkasasd iasdfhkasasd pet
# {
#   "rows": [{
#       "id": 151,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "113560d00883b625853d7904f1a0f373",
#       "attr": "{\"aa\":\"aaa\",\"bb\":\"bbb\"}"
#     },{
#       "id": 161,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "113560d00883b625853d7904f1a0f373",
#       "attr": "{\"aa\":121,\"bb\":\"ccc\"}"
#     },{
#       "id": 7332,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "f5e2268b11fe34817fa87c0f28d4823d",
#       "attr": "{\"eosPet\":{\"createDate\":1527550677000,\"dna\":\"f5e2268b11fe34817fa87c0f28d4823d\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f5e2268b11fe34817fa87c0f28d4823d\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/f5e2268b11fe34817fa87c0f28d4823d.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"name\":\"叻哥\",\"ownerCode\":\"Hg+qk0DM0DFxth1IovDmVw==\",\"petVersion\":1,\"stat\":0},\"eosPetAttr\":{\"dna\":\"f5e2268b11fe34817fa87c0f28d4823d\",\"growthAgi\":1.15,\"growthInt\":1.15,\"growthStr\":1.15,\"growthVit\":1.16,\"propAgi\":8,\"propInt\":9,\"propStr\":12,\"propVit\":12,\"skills\":\"EARTH_QUAKE,TOXIC,MAGIC_FURY,\"},\"eosPetValue\":{\"dna\":\"f5e2268b11fe34817fa87c0f28d4823d\",\"point\":4111}}"
#     },{
#       "id": 7478,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "113560d00883b625853d7904f1a0f373",
#       "attr": "{\"aa\":\"aaa\",\"bb\":\"bbb\"}"
#     },{
#       "id": 8146,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "752324db8a778eb52fad009c69951d01",
#       "attr": "{\"eosPet\":{\"createDate\":1527686797000,\"dna\":\"752324db8a778eb52fad009c69951d01\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000752324db8a778eb52fad009c69951d01\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/752324db8a778eb52fad009c69951d01.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"name\":\"小可爱(>﹏<)\",\"ownerCode\":\"JwXSzc9LJOOJ6Wad/LKACg==\",\"petVersion\":1,\"stat\":0},\"eosPetAttr\":{\"dna\":\"752324db8a778eb52fad009c69951d01\",\"growthAgi\":1.14,\"growthInt\":1.15,\"growthStr\":1.16,\"growthVit\":1.14,\"propAgi\":11,\"propInt\":8,\"propStr\":9,\"propVit\":12,\"skills\":\"ROCK_HIT,AGILE,SPELL_INSTANT,\"},\"eosPetValue\":{\"dna\":\"752324db8a778eb52fad009c69951d01\",\"point\":28}}"
#     },{
#       "id": 8147,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "8bd0eeb6e7085c06677475b57cb0e952",
#       "attr": "{\"eosPet\":{\"createDate\":1527686912000,\"dna\":\"8bd0eeb6e7085c06677475b57cb0e952\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008bd0eeb6e7085c06677475b57cb0e952\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/8bd0eeb6e7085c06677475b57cb0e952.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"name\":\"Dog\",\"ownerCode\":\"4XuB5TxTh0so0IdoyqJgAQ==\",\"petVersion\":1,\"stat\":0},\"eosPetValue\":{\"dna\":\"8bd0eeb6e7085c06677475b57cb0e952\",\"point\":1}}"
#     },{
#       "id": 8148,
#       "generation": 1,
#       "owner": "anonymousooo",
#       "dna": "087926e40ac1b69cbb117c1fa2c67c4c",
#       "attr": "{\"eosPet\":{\"createDate\":1527686947000,\"dna\":\"087926e40ac1b69cbb117c1fa2c67c4c\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000087926e40ac1b69cbb117c1fa2c67c4c\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/087926e40ac1b69cbb117c1fa2c67c4c.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"ownerCode\":\"qJn3O0LY1OOMhYQeHGsNMQ==\",\"petVersion\":1,\"stat\":0}}"
#     },{
#       "id": 8150,
#       "generation": 1,
#       "owner": "anonymousooo",
#       "dna": "22043c35fbf295d16e8a04974adc6ffa",
#       "attr": "{\"eosPet\":{\"createDate\":1527687077000,\"dna\":\"22043c35fbf295d16e8a04974adc6ffa\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022043c35fbf295d16e8a04974adc6ffa\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/22043c35fbf295d16e8a04974adc6ffa.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"ownerCode\":\"qJn3O0LY1OOMhYQeHGsNMQ==\",\"petVersion\":1,\"stat\":0}}"
#     },{
#       "id": 8151,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "fd5ec0c794c06379821ab6adf6faa676",
#       "attr": "{\"eosPet\":{\"createDate\":1527687172000,\"dna\":\"fd5ec0c794c06379821ab6adf6faa676\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fd5ec0c794c06379821ab6adf6faa676\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/fd5ec0c794c06379821ab6adf6faa676.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"name\":\"666\",\"ownerCode\":\"359CyoJ2PVCD15vBdbfvYg==\",\"petVersion\":1,\"stat\":0},\"eosPetValue\":{\"dna\":\"fd5ec0c794c06379821ab6adf6faa676\",\"point\":1}}"
#     },{
#       "id": 8152,
#       "generation": 1,
#       "owner": "iasdfhkasasd",
#       "dna": "8b6805750b6825a7cb8ecf1d88dc52ca",
#       "attr": "{\"eosPet\":{\"createDate\":1527687327000,\"dna\":\"8b6805750b6825a7cb8ecf1d88dc52ca\",\"extDNA\":\"\",\"father\":\"00000000000000000000000000000000\",\"fullDNA\":\"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008b6805750b6825a7cb8ecf1d88dc52ca\",\"imageUrl\":\"http://easytrade-1254037028.file.myqcloud.com/xpet/8b6805750b6825a7cb8ecf1d88dc52ca.png\",\"level\":1,\"mother\":\"00000000000000000000000000000000\",\"name\":\"奶油包\",\"ownerCode\":\"x5dGnYNZ0zivj77czvhl5g==\",\"petVersion\":1,\"stat\":0},\"eosPetValue\":{\"dna\":\"8b6805750b6825a7cb8ecf1d88dc52ca\",\"point\":1}}"
#     }
#   ],
#   "more": true
# }

cleos-kylin get table iasdfhkasasd iasdfhkasasd adminpet
# {
#   "rows": [{
#       "id": 161
#     },{
#       "id": 7332
#     },{
#       "id": 7478
#     },{
#       "id": 8146
#     },{
#       "id": 8147
#     },{
#       "id": 8151
#     },{
#       "id": 8152
#     },{
#       "id": 8154
#     },{
#       "id": 8157
#     },{
#       "id": 8165
#     }
#   ],
#   "more": true
# }

cleos-kylin get table iasdfhkasasd iasdfhkasasd sale
# {
#   "rows": [{
#       "id": 8173,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8174,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8176,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8177,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8178,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 10117,
#       "amount": "0.1000 EOS"
#     }
#   ],
#   "more": false
# }

cleos-kylin get table iasdfhkasasd iasdfhkasasd user
# {
#   "rows": [{
#       "id": "anonymous112",
#       "pets": [
#         8187,
#         8188
#       ]
#     },{
#       "id": "anonymousooo",
#       "pets": [
#         10114,
#         10115,
#         8148,
#         8150,
#         8153,
#         8155,
#         8156,
#         8158,
#         8159,
#         8160,
#         8162,
#         8161,
#         8163,
#         8164
#       ]
#     },{
#       "id": "iasdfhkasasd",
#       "pets": [
#         151
#       ]
#     }
#   ],
#   "more": false
# }

cleos-kylin get currency balance eosio.token iasdfhkasasd
# 200.0000 EOS

cleos-kylin get currency balance eosio.token anonymous112
# 3383.0000 EOS


cleos-kylin push action eosio updateauth '{"account":"anonymous112","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS8gP4LQWiz85jEi1mmWBDKU5ehLZF2fmg7UwnXaXNfJoDbjsExv","weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"iasdfhkasasd","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p anonymous112


# 玩家与平台(无手续费)
cleos-kylin push action iasdfhkasasd userbusiness '["anonymous112",8173,"0.1000 EOS"]' -p anonymous112


cleos-kylin get currency balance eosio.token anonymous112
# 3382.9000 EOS

cleos-kylin get currency balance eosio.token iasdfhkasasd
# 200.1000 EOS

cleos-kylin get table iasdfhkasasd iasdfhkasasd user
# {
#   "rows": [{
#       "id": "anonymous112",
#       "pets": [
#         8187,
#         8188,
#         8173
#       ]
#     },{
#       "id": "anonymousooo",
#       "pets": [
#         10114,
#         10115,
#         8148,
#         8150,
#         8153,
#         8155,
#         8156,
#         8158,
#         8159,
#         8160,
#         8162,
#         8161,
#         8163,
#         8164
#       ]
#     },{
#       "id": "iasdfhkasasd",
#       "pets": [
#         151
#       ]
#     }
#   ],
#   "more": false
# }

cleos-kylin get table iasdfhkasasd iasdfhkasasd sale
# {
#   "rows": [{
#       "id": 8174,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8176,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8177,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8178,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 10117,
#       "amount": "0.1000 EOS"
#     }
#   ],
#   "more": false
# }


cleos-kylin push action iasdfhkasasd salepet '["anonymous112",8173,"99.0000 EOS"]' -p anonymous112

cleos-kylin get table iasdfhkasasd iasdfhkasasd sale
# {
#   "rows": [{
#       "id": 8173,
#       "amount": "99.0000 EOS"
#     },{
#       "id": 8174,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8176,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8177,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8178,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 10117,
#       "amount": "0.1000 EOS"
#     }
#   ],
#   "more": false
# }

cleos-kylin get currency balance eosio.token anonymousooo
# 491.9060 EOS

cleos-kylin push action eosio updateauth '{"account":"anonymousooo","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS8gP4LQWiz85jEi1mmWBDKU5ehLZF2fmg7UwnXaXNfJoDbjsExv","weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"iasdfhkasasd","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p anonymousooo

#玩家与玩家(5%手续费)
cleos-kylin push action iasdfhkasasd userbusiness '["anonymousooo",8173,"99.0000 EOS"]' -p anonymousooo

cleos-kylin get currency balance eosio.token anonymousooo
# 392.9060 EOS

cleos-kylin get currency balance eosio.token anonymous112
# 3476.9500 EOS

cleos-kylin get currency balance eosio.token iasdfhkasasd
# 205.0500 EOS

cleos-kylin get table iasdfhkasasd iasdfhkasasd sale
# {
#   "rows": [{
#       "id": 8174,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8176,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8177,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 8178,
#       "amount": "0.1000 EOS"
#     },{
#       "id": 10117,
#       "amount": "0.1000 EOS"
#     }
#   ],
#   "more": false
# }

cleos-kylin get table iasdfhkasasd iasdfhkasasd user
# {
#   "rows": [{
#       "id": "anonymous112",
#       "pets": [
#         8187,
#         8188
#       ]
#     },{
#       "id": "anonymousooo",
#       "pets": [
#         10114,
#         10115,
#         8148,
#         8150,
#         8153,
#         8155,
#         8156,
#         8158,
#         8159,
#         8160,
#         8162,
#         8161,
#         8163,
#         8164,
#         8173
#       ]
#     },{
#       "id": "iasdfhkasasd",
#       "pets": [
#         151
#       ]
#     }
#   ],
#   "more": false
# }

######################################################
######################################################
######################################################
# 设置宠物价值与转账
cleos-kylin push action eosio updateauth '{"account":"anonymous112","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS8gP4LQWiz85jEi1mmWBDKU5ehLZF2fmg7UwnXaXNfJoDbjsExv","weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"iasdfhkasasd","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p anonymous112
cleos-kylin push action eosio updateauth '{"account":"iasdfhkasasd","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS8gP4LQWiz85jEi1mmWBDKU5ehLZF2fmg7UwnXaXNfJoDbjsExv","weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"iasdfhkasasd","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p iasdfhkasasd

cleos-kylin get currency balance eosio.token anonymous112
# 3476.9500 EOS

cleos-kylin get table iasdfhkasasd iasdfhkasasd petvalue
# {
#   "rows": [],
#   "more": false
# }

cleos-kylin push action iasdfhkasasd addpetvalue '["anonymous112",8187,"99.0000 EOS"]' -p anonymous112

cleos-kylin get currency balance eosio.token anonymous112
# 3377.9500 EOS

cleos-kylin get table iasdfhkasasd iasdfhkasasd petvalue
# {
#   "rows": [{
#       "id": 8187,
#       "value": "99.0000 EOS"
#     }
#   ],
#   "more": false
# }

cleos-kylin push action iasdfhkasasd addpetvalue '["anonymous112",8187,"100.0000 EOS"]' -p anonymous112

cleos-kylin get currency balance eosio.token anonymous112
# 3277.9500 EOS

cleos-kylin get table iasdfhkasasd iasdfhkasasd petvalue
# {
#   "rows": [{
#       "id": 8187,
#       "value": "199.0000 EOS"
#     }
#   ],
#   "more": false
# }

# 转出过多，报错
cleos-kylin push action iasdfhkasasd withdraw '["anonymous112",8187,"199.0001 EOS"]' -p anonymous112

cleos-kylin push action iasdfhkasasd withdraw '["anonymous112",8187,"66.6666 EOS"]' -p anonymous112
#  iasdfhkasasd <= iasdfhkasasd::withdraw       {"owner":"anonymous112","pet_id":8187,"amount":"66.6666 EOS"}
#   eosio.token <= eosio.token::transfer        {"from":"iasdfhkasasd","to":"anonymous112","quantity":"63.3333 EOS","memo":"offer bet"}
#  iasdfhkasasd <= eosio.token::transfer        {"from":"iasdfhkasasd","to":"anonymous112","quantity":"63.3333 EOS","memo":"offer bet"}
#  anonymous112 <= eosio.token::transfer        {"from":"iasdfhkasasd","to":"anonymous112","quantity":"63.3333 EOS","memo":"offer bet"}

cleos-kylin get table iasdfhkasasd iasdfhkasasd petvalue
# {
#   "rows": [{
#       "id": 8187,
#       "value": "132.3334 EOS"
#     }
#   ],
#   "more": false
# }

cleos-kylin get currency balance eosio.token anonymous112
# 3341.2833 EOS

cleos-kylin push action iasdfhkasasd withdraw '["anonymous112",8187,"132.3334 EOS"]' -p anonymous112
#  iasdfhkasasd <= iasdfhkasasd::withdraw       {"owner":"anonymous112","pet_id":8187,"amount":"132.3334 EOS"}
#   eosio.token <= eosio.token::transfer        {"from":"iasdfhkasasd","to":"anonymous112","quantity":"125.7168 EOS","memo":"offer bet"}
#  iasdfhkasasd <= eosio.token::transfer        {"from":"iasdfhkasasd","to":"anonymous112","quantity":"125.7168 EOS","memo":"offer bet"}
#  anonymous112 <= eosio.token::transfer        {"from":"iasdfhkasasd","to":"anonymous112","quantity":"125.7168 EOS","memo":"offer bet"}

cleos-kylin get table iasdfhkasasd iasdfhkasasd petvalue
# {
#   "rows": [],
#   "more": false
# }

cleos-kylin get currency balance eosio.token anonymous112
# 3467.0001 EOS